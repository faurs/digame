@startuml

note "NG 表示 NormalGame\nBG 表示 BonusGame\nLD 表示 LuckyDraw\nFG 表示 FreeGame\n[] 為玩家送來的封包" as N1

Init : 初始
NGPlay : 等待下注\n[NGPlay]
BGStart : BG 開始表演\n[BGStart]
BGPlay : BG 等待選項\n[BGPlay]
BGEnd : BG 結束表演\n[BGEnd]
LDStart : LD 開始表演\n[LDStart]
LDPlay : LD 等待選項\n[LDPlay]
LDEnd : LD 結束表演\n[LDEnd]
FGStart : FG 開始表演\n[FGStart]
FGPlay : FG 等待 Spin\n[FGPlay]
FGEnd : FG 結束表演\n[FGEnd]

[*] --> Init
Init --> NGPlay: 玩家加入遊戲
NGPlay --> NGPlay : 沒贏分
NGPlay --> BGStart : 中 BG
NGPlay --> LDStart : 中 FG, 有 LD
NGPlay --> FGStart : 中 FG, 沒 LD

BGStart --> BGPlay : BG 開始表演
BGPlay --> BGPlay : BG 選項完, 沒結束
BGPlay --> BGEnd : BG 選項完, 有結束
BGEnd --> NGPlay : BG 結束

LDStart --> LDPlay : LD 開始表演
LDPlay --> LDPlay : LD 選項完, 沒結束
LDPlay --> LDEnd : LD 選項完, 有結束
LDEnd --> FGStart : LD 結束

FGStart --> FGPlay : FG 開始表演
FGPlay --> FGPlay : FG Spin 完, 沒結束
FGPlay --> FGStart : FG Spin 完, 內部 FG Retrigger, 需要轉場
FGPlay --> FGEnd : FG Spin 完, 有結束
FGEnd --> NGPlay : FG 結束
FGEnd --> LDStart : FG 結束, FG retrigger, 有 LD
FGEnd --> FGStart : FG 結束, FG retrigger, 沒 LD

@enduml